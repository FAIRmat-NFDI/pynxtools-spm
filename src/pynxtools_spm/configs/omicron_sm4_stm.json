{
  "ENTRY[entry]": {
    "@default": { "raw_path": "@default:current_backward" },
    "identifier_collection": "",
    "start_time": {
      "raw_path": "/Topography_Forward/Handled in function _set_start_end_time use RHK_DATE and RHK_TIME"
    },
    "end_time": {
      "#note": "Handled in function _set_start_end_time",
      "raw_path": "/Topography_Backward/RHK_ImageDrift_Time"
    },
    "scan_mode": "",
    "scan_type": "",
    "experiment_description": { "raw_path": "/COMMENT" },
    "INSTRUMENT[instrument]": {
      "scan_environment": {
        "tip_temp": {
          "raw_path": "/Temperature 1/Temperature 1",
          "@units": "@default:K"
        },
        "cryo_bottom_temp": "",
        "cryo_shield_temp": "",
        "scan_name": { "raw_path": "/Scan/series name" },
        "SCAN_CONTROL[scan_control_*]": {
          "#note": "handled in function _construct_nxscan_controllers. With '*' it is possible to have multiple scan controllers with different extensions.",
          "scan_name": { "raw_path": "/Topography_Forward/RHK_PageID" },
          "mesh_SCAN[mesh_scan]": {
            "backward_speed_N[backward_speed_n]": {
              "#note": "Derived in construct_scan_pattern_grp",
              "raw_path": "/Scan/speed backw.",
              "@units": "/Scan/speed backw./@unit"
            },
            "forward_speed_N[forward_speed_n]": {
              "#note": "Derived in construct_scan_pattern_grp",
              "raw_path": "/Scan/speed forw.",
              "@units": "/Scan/speed forw./@unit"
            },
            "scan_speed_N[scan_speed_n]": "",
            "channel_NAME_N[scan_name_n]": "",
            "scan_points_N[scan_points_n]": [
              {
                "x": {
                  "raw_path": "/Topography_Forward/RHK_Xsize"
                }
              },
              {
                "y": {
                  "raw_path": "/Topography_Forward/RHK_Ysize"
                }
              }
            ],
            "stepping_N[stepping_n]": {
              "raw_path": "@default:1",
              "@units": ""
            },
            "step_size_N[step_size_n]": [
              { "x": { "raw_path": "", "@units": "" } },
              { "y": { "raw_path": "", "@units": "" } }
            ],
            "scan_time": "",
            "SCAN_DATA[scan_data]": ""
          },
          "scan_region": {
            "scan_angle_N[scan_angle_n]": [
              {
                "x": {
                  "raw_path": "/Topography_Forward/RHK_Angle",
                  "@units": "@default:deg"
                }
              },
              {
                "y": {
                  "raw_path": "/Topography_Forward/RHK_Angle",
                  "@units": "@default:deg"
                }
              }
            ],
            "scan_offset_N[scan_offset_n]": [
              {
                "x": {
                  "raw_path": "/Topography_Forward/RHK_Xoffset",
                  "@units": "/Topography_Forward/RHK_X/@unit"
                }
              },
              {
                "y": {
                  "raw_path": "/Topography_Forward/RHK_Yoffset",
                  "@units": "/Topography_Forward/RHK_Y/@unit"
                }
              }
            ],
            "scan_range_N[scan_range_n]": {
              "#note": "Derived in function 'construct_scan_region_grp'.",
              "raw_path": "/SCAN/RANGE",
              "@units": "/Z-Controller/Z/@unit"
            },
            "scan_start_N[scan_start_n]": {
              "raw_path": "",
              "@units": ""
            },
            "scan_end_N[scan_end_n]": {
              "raw_path": "",
              "@units": ""
            }
          },
          "scan_time_start": "",
          "scan_time_end": "",
          "independent_scan_axes": {
            "#note": "Handled in function _construct_nxscan_controllers",
            "raw_path": "/SCAN/DIR",
            "@units": ""
          },
          "scan_resolution_N": "",
          "accuracy_N": "",
          "scan_type": { "raw_path": "@default:mesh", "@units": "" },
          "scan_control_type": {
            "raw_path": "@default:continuous",
            "@units": ""
          }
        },
        "independent_controllers": "",
        "measurement_sensors": "",
        "cryo_shield_temp_sensor": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/cryo_shield_temp_sensor",
        "cryo_temp_sensor": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/cryo_temp_sensor",
        "tip_temp_sensor": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/tip_temp_sensor"
      },
      "voltage_sensor": {
        "voltage": {
          "raw_path": "/Topography_Forward/RHK_bias",
          "@units": "@default:V"
        }
      },
      "current_sensor": {
        "current": {
          "raw_path": "/Topography_Forward/RHK_Current",
          "@units": "/Topography_Forward/RHK_ZPI_SetPoint/@unit"
        },
        "current_offset": {
          "raw_path": "/Topography_Forward/RHK_Current/Offset",
          "@units": "/Topography_Forward/RHK_Current/Offset/@unit"
        },
        "current_calibration": {
          "coefficients": "",
          "calibration_time": ""
        },
        "AMPLIFIER[amplifier]": {
          "current_gain": { "raw_path": "" }
        }
      },
      "lockin_amplifier": {
        "#note": "handled in function _construct_lockin_amplifier_grp",
        "reference_frequency": {
          "raw_path": "/Topography_Forward/RHK_CH1Drive_Frequency",
          "@units": "/Topography_Forward/RHK_CH1Drive_Frequency/@unit"
        },
        "reference_amplitude": {
          "raw_path": "/Topography_Forward/RHK_CH1Drive_Amplitude",
          "@units": "/Topography_Forward/RHK_CH1Drive_Amplitude/@unit"
        },
        "reference_phase": {
          "raw_path": "/Topography_Forward/RHK_CH1Drive_PhaseOffset",
          "@units": "/Topography_Forward/RHK_CH1Drive_PhaseOffset/@unit"
        },
        "active_channel": {
          "raw_path": "/Topography_Forward/RHK_Lockin0_NonMasterOscillator"
        },
        "modulation_signal": {
          "raw_path": "/Lock-in/Modulated signal"
        },
        "demodulated_signal": {
          "raw_path": "/Lock-in/Demodulated signal"
        },
        "modulation_status": { "raw_path": "/Lock-in/Lock-in status" },
        "demodulated_frequency": "",
        "demodulated_amplitude": "",
        "demodulator_channels": "",
        "recorded_channels": "",
        "low_pass_N[low_pass_n]": [
          {
            "d1": {
              "raw_path": "/Topography_Forward/RHK_LowPassFilter1_CutoffFrequency",
              "@units": "/Topography_Forward/RHK_LowPassFilter1_CutoffFrequency/@unit"
            }
          }
        ],
        "lp_filter_order_N": [
          {
            "d1": { "raw_path": "/Lock-in/LP Filter Order D1" },
            "d2": { "raw_path": "/Lock-in/LP Filter Order D2" }
          }
        ],
        "hi_pass_N": [
          {
            "d1": {
              "raw_path": "/Lock-in/HP Filter Cutoff D1",
              "@units": "/Lock-in/HP Filter Cutoff D1/@unit"
            }
          },
          {
            "d2": {
              "raw_path": "/Lock-in/HP Filter Cutoff D2",
              "@units": "/Lock-in/HP Filter Cutoff D2/@unit"
            }
          }
        ],
        "hp_filter_order_N": [
          { "d1": { "raw_path": "/Lock-in/HP Filter Order D1" } },
          { "d2": { "raw_path": "/Lock-in/HP Filter Order D2" } }
        ],
        "ref_phase_N[ref_phase_n]": [
          {
            "d1": {
              "raw_path": "/Topography_Forward/RHK_CH1Drive_PhaseOffset",
              "@units": "/Topography_Forward/RHK_CH1Drive_PhaseOffset/@unit"
            }
          },
          {
            "d2": {
              "raw_path": "/Topography_Forward/RHK_CH2Drive_PhaseOffset",
              "@units": "/Topography_Forward/RHK_CH2Drive_PhaseOffset/@unit"
            }
          }
        ],
        "harmonic_order_N[harmonic_order_n]": [
          {
            "d1": {
              "raw_path": "/Topography_Forward/RHK_CH1Drive_HarmonicFactor"
            }
          },
          {
            "d2": {
              "raw_path": "/Topography_Forward/RHK_CH2Drive_HarmonicFactor"
            }
          }
        ],
        "dc_offset_N": [
          {
            "d1": {
              "raw_path": "/Topography_Forward/RHK_CH1DriveValue",
              "@units": "/Topography_Forward/RHK_CH1DriveValue/@unit"
            }
          },
          {
            "d2": {
              "raw_path": "/Topography_Forward/RHK_CH2DriveValue",
              "@units": "/Topography_Forward/RHK_CH2DriveValue/@unit"
            }
          }
        ]
      },
      "bias_spectroscopy_environment": {
        "BIAS_SPECTROSCOPY[bias_spectroscopy]": {
          "measurement_type": "",
          "POSITIONER_SPM[positioner_spm]": {
            "z_controller": {
              "z_average_time": {
                "raw_path": "/Bias Spectroscopy/Z Avg time",
                "@units": "/Bias Spectroscopy/Z Avg time/@unit"
              },
              "z_controller_time": {
                "raw_path": "/Bias Spectroscopy/Z control time",
                "@units": "/Bias Spectroscopy/Z control time/@unit"
              },
              "z_controller_hold": {
                "raw_path": "/Bias Spectroscopy/Z-controller hold"
              },
              "record_final_z": {
                "raw_path": "/Bias Spectroscopy/Record final Z"
              }
            },
            "z_offset": {
              "raw_path": "/Bias Spectroscopy/Z offset",
              "@units": "/Bias Spectroscopy/Z offset/@unit"
            }
          },
          "bias_sweep": {
            "scan_type": "",
            "settling_time": {
              "raw_path": "/Bias Spectroscopy/Settling time",
              "@units": "/Bias Spectroscopy/Settling time/@unit"
            },
            "first_settling_time": {
              "raw_path": "/Bias Spectroscopy/1st Settling time",
              "@units": "/Bias Spectroscopy/1st Settling time/@unit"
            },
            "end_settling_time": {
              "raw_path": "/Bias Spectroscopy/End Settling time",
              "@units": "/Bias Spectroscopy/End Settling time/@unit"
            },
            "max_slew_rate": {
              "raw_path": "/Bias Spectroscopy/Max Slew rate",
              "@units": "/Bias Spectroscopy/Max Slew rate/@unit"
            },
            "final_z": "",
            "total_spectroscopy_time": "",
            "sweep_number": {
              "raw_path": "/Bias Spectroscopy/Number of sweeps"
            },
            "scan_region": {
              "scan_range_bias": "",
              "scan_offset_bias": "",
              "scan_angle_N[scan_angle_n]": "",
              "scan_start_bias": {
                "raw_path": "/Bias Spectroscopy/Sweep Start",
                "@units": "/Bias Spectroscopy/Sweep Start/@unit"
              },
              "scan_end_bias": {
                "raw_path": "/Bias Spectroscopy/Sweep End",
                "@units": "/Bias Spectroscopy/Sweep End/@unit"
              }
            },
            "linear_sweep": {
              "scan_speed": "",
              "scan_time": "",
              "forward_speed": "",
              "backward_speed": "",
              "scan_points_bias": {
                "raw_path": "/Bias Spectroscopy/Num Pixel"
              },
              "step_size_bias": "",
              "reset_bias": "",
              "backward_sweep": {
                "raw_path": "/Bias Spectroscopy/backward sweep"
              },
              "SCAN_DATA[scan_data]": ""
            }
          },
          "CIRCUIT[circuit]": ""
        }
      },
      "piezo_sensor": {
        "PIEZO_CONFIG_SPM[piezo_configuration]": {
          "calibration": {
            "calibration_type": {
              "raw_path": "@default:active"
            },
            "calibration_date": {
              "raw_path": "/Topography_Forward/RHK_DateTime"
            },
            "calibration_coefficient_N[calibration_coefficient_n]": [
              {
                "x": {
                  "raw_path": "/Topography_Forward/RHK_PiezoSensitivity_TubeX",
                  "@units": "/Topography_Forward/RHK_PiezoSensitivity_TubeX/@unit"
                }
              },
              {
                "y": {
                  "raw_path": "/Topography_Forward/RHK_PiezoSensitivity_TubeY",
                  "@units": "/Topography_Forward/RHK_PiezoSensitivity_TubeY/@unit"
                }
              },
              {
                "z": {
                  "raw_path": "/Topography_Forward/RHK_PiezoSensitivity_TubeZ",
                  "@units": "/Topography_Forward/RHK_PiezoSensitivity_TubeZ/@unit"
                }
              }
            ],
            "second_order_correction_N[second_order_correction_n]": [
              {
                "x": {
                  "raw_path": "/Piezo Configuration/2nd order corr X",
                  "@units": "/Piezo Configuration/2nd order corr X/@unit"
                }
              },
              {
                "y": {
                  "raw_path": "/Piezo Configuration/2nd order corr Y",
                  "@units": "/Piezo Configuration/2nd order corr Y/@unit"
                }
              },
              {
                "z": {
                  "raw_path": "/Piezo Configuration/2nd order corr Z",
                  "@units": "/Piezo Configuration/2nd order corr Z/@unit"
                }
              }
            ],
            "calibration_name": {
              "raw_path": "/Piezo Configuration/Active Calib."
            },
            "drift_N[drift_n]": [
              {
                "x": {
                  "raw_path": "/Topography_Forward/ImageDrift_dX",
                  "@units": "/Topography_Forward/ImageDrift_dX/@unit"
                }
              },
              {
                "y": {
                  "raw_path": "/Topography_Forward/ImageDrift_dY",
                  "@units": "/Topography_Forward/ImageDrift_dY/@unit"
                }
              },
              {
                "z": ""
              }
            ],
            "drift_correction_status": {
              "raw_path": [
                "/Piezo Configuration/Drift correction status",
                "/Piezo Calibration/Drift correction status"
              ]
            },
            "hv_gain_N[hv_gain_n]": [
              { "x": { "raw_path": "/Piezo Configuration/HV Gain X" } },
              { "y": { "raw_path": "/Piezo Configuration/HV Gain Y" } },
              { "z": { "raw_path": "/Piezo Configuration/HV Gain Z" } }
            ],
            "tilt_N[tilt_n]": [
              {
                "x": {
                  "raw_path": "/Piezo Configuration/Tilt X",
                  "@units": "/Piezo Configuration/Tilt X/@unit"
                }
              },
              {
                "y": {
                  "raw_path": "/Piezo Configuration/Tilt Y",
                  "@units": "/Piezo Configuration/Tilt X/@unit"
                }
              },
              {
                "z": {
                  "raw_path": "/Piezo Configuration/Tilt Z",
                  "@units": "/Piezo Configuration/Tilt X/@unit"
                }
              }
            ]
          },
          "piezo_material": {
            "curvature_radius_N": [
              {
                "x": {
                  "raw_path": "/Piezo Configuration/Curvature radius X",
                  "@units": "/Piezo Configuration/Curvature radius X/@unit"
                }
              },
              {
                "y": {
                  "raw_path": "/Piezo Configuration/Curvature radius Y",
                  "@units": "/Piezo Configuration/Curvature radius Y/@unit"
                }
              },
              {
                "z": {
                  "raw_path": "/Piezo Configuration/Curvature radius Z",
                  "@units": "/Piezo Configuration/Curvature radius Z/@unit"
                }
              }
            ]
          }
        },
        "POSITIONER_SPM[positioner_spm]": {
          "z_controller": {
            "K_i": {
              "raw_path": "/Topography_Forward/RHK_ZPI_IntegralGain",
              "@units": "/Topography_Forward/RHK_ZPI_IntegralGain/@unit"
            },
            "K_p": {
              "raw_path": "/Topography_Forward/RHK_ZPI_ProportionalGain",
              "@units": "/Topography_Forward/RHK_ZPI_ProportionalGain/@unit"
            },
            "set_point": {
              "raw_path": "/Topography_Forward/RHK_ZPI_SetPoint",
              "@units": "/Topography_Forward/RHK_ZPI_SetPoint/@unit"
            },
            "D_t": {
              "raw_path": "/Z-Controller/Time const",
              "@units": "/Z-Controller/Time const/@unit"
            },
            "tip_lift": {
              "raw_path": "/Z-Controller/TipLift",
              "@units": "/Z-Controller/TipLift/@unit"
            },
            "controller_status": {
              "raw_path": "/Z-Controller/Controller status"
            },
            "switch_off_delay": {
              "raw_path": "/Z-Controller/Switch off delay",
              "@units": "/Z-Controller/Switch off delay/@unit"
            },
            "z": {
              "raw_path": "/Z-Controller/Z",
              "@units": "/Z-Controller/Z/@unit"
            }
          },
          "z_offset": {
            "raw_path": "/Topography_Forward/RHK_Zoffset",
            "@units": "/Topography_Forward/RHK_Zoffset/@unit"
          },
          "tip_position_z": "",
          "controller_label": { "raw_path": "/Z-Controller/Controller name" }
        },
        "x": "",
        "y": "",
        "z": {
          "raw_path": "/Z-Controller/Z",
          "@units": "/Z-Controller/Z/@unit"
        }
      },
      "real_time_controller": {
        "rcs_fabrication": {
          "model": {
            "raw_path": "/NanonisMain/RT Release/value"
          }
        },
        "rcs_frequency": {
          "raw_path": "/NanonisMain/RT Frequency",
          "@units": "/NanonisMain/RT Frequency/@unit"
        },
        "rcs_acquisition_time": {
          "raw_path": "/NanonisMain/Acquisition Period",
          "@units": "/NanonisMain/Acquisition Period/@unit"
        },
        "rcs_animation_time": {
          "raw_path": "/NanonisMain/Animations Period",
          "@units": "/NanonisMain/Animations Period/@unit"
        },
        "rcs_measurement_time": {
          "raw_path": "/NanonisMain/Measurements Period",
          "@units": "/NanonisMain/Measurements Period/@unit"
        },
        "rcs_indication_time": {
          "raw_path": "/NanonisMain/Indicators Period",
          "@units": "/NanonisMain/Indicators Period/@unit"
        }
      },
      "sample_bias_voltage": {
        "bias_voltage": {
          "raw_path": "/Topography_Forward/RHK_bias",
          "@units": "@default:V"
        },
        "bias_offset": "",
        "bias_calibration": {
          "coefficients": "",
          "calibration_time": ""
        }
      }
    },
    "PROCESS[process]": { "program": "" },
    "SAMPLE[sample]": { "name": "" },
    "USER[user]": {
      "address": "",
      "affiliation": "",
      "email": "",
      "name": "",
      "orcid": "",
      "telephone_number": ""
    },
    "DATA[data]": [
      {
        "data": {
          "name": "Topography_forward",
          "raw_path": "/Topography_Forward/data",
          "@units": "/Topography_Forward/RHK_Z/@unit"
        },
        "0": {
          "name": "x",
          "raw_path": "/Topography_Forward/coords/Topography_Forward_x",
          "@units": "/Topography_Forward/RHK_X/@unit"
        },
        "1": {
          "name": "y",
          "raw_path": "/Topography_Forward/coords/Topography_Forward_y",
          "@units": "/Topography_Forward/RHK_Y/@unit"
        },
        "title": {
          "raw_path": "@default:Topography Plot of STM Experiment (Foward Direction)"
        },
        "grp_name": "z_forward"
      },
      {
        "data": {
          "name": "Topography_backward",
          "raw_path": "/Topography_Backward/data",
          "@units": "/Topography_Backward/RHK_Z/@unit"
        },
        "0": {
          "name": "x",
          "raw_path": "/Topography_Backward/coords/Topography_Backward_x",
          "@units": "/Topography_Backward/RHK_X/@unit"
        },
        "1": {
          "name": "y",
          "raw_path": "/Topography_Backward/coords/Topography_Backward_y",
          "@units": "/Topography_Backward/RHK_Y/@unit"
        },
        "title": {
          "raw_path": "@default:Topography Plot of STM Experiment (Backward Direction)"
        },
        "grp_name": "z_backward"
      },
      {
        "data": {
          "name": "Current",
          "raw_path": "/Current_Backward/data",
          "@units": "/Current_Backward/RHK_Z/@unit"
        },
        "0": {
          "name": "x",
          "raw_path": "/Current_Backward/coords/Current_Backward_x",
          "@units": "/Current_Backward/RHK_X/@unit"
        },
        "1": {
          "name": "y",
          "raw_path": "/Current_Backward/coords/Current_Backward_y",
          "@units": "/Current_Backward/RHK_Y/@unit"
        },
        "title": {
          "raw_path": "@default:Current Plot of STM Experiment (Forward Direction)"
        },
        "grp_name": "current_forward"
      },
      {
        "data": {
          "name": "Current",
          "raw_path": "/Current_Forward/data",
          "@units": "/Current_Forward/RHK_Z/@unit"
        },
        "0": {
          "name": "x",
          "raw_path": "/Current_Forward/coords/Current_Forward_x",
          "@units": "/Current_Forward/RHK_X/@unit"
        },
        "1": {
          "name": "y",
          "raw_path": "/Current_Forward/coords/Current_Forward_y",
          "@units": "/Current_Forward/RHK_Y/@unit"
        },
        "title": {
          "raw_path": "@default:Current Plot of STM Experiment (Backward Direction)"
        },
        "grp_name": "current_backward"
      }
    ],
    "reproducibility_indicators": {
      "current": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/current_sensor/current",
      "current_gain": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/current_sensor/AMPLIFIER[amplifier]/current_gain",
      "current_offset": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/current_sensor/current_offset",
      "bias_sweep": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/bias_spectroscopy_environment/BIAS_SPECTROSCOPY[bias_spectroscopy]/BIAS_SWEEP[bias_sweep]",
      "reference_frequency": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/lockin_amplifier/reference_frequency",
      "modulation_signal": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/lockin_amplifier/modulation_signal"
    },
    "resolution_indicators": {
      "stm_head_temp": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/scan_environment/tip_temp",
      "cryo_bottom_temp": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/scan_environment/cryo_bottom_temp",
      "cryo_shield_temp": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/scan_environment/cryo_shield_temp",
      "bias_sweep": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/bias_spectroscopy_environment/BIAS_SPECTROSCOPY[bias_spectroscopy]/BIAS_SWEEP[bias_sweep]",
      "reference_frequency": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/lockin_amplifier/reference_frequency",
      "modulation_signal": "@default_link:/ENTRY[entry]/INSTRUMENT[instrument]/lockin_amplifier/modulation_signal"
    }
  }
}
