# Work with Reader
Reader has to be given some specific input files which are required for its operation. They may come from the instrument provided file and files that user provided meatadata or ELN schema file to write your metadata via NOMAD.

## Input Files
The reader basically needs three types of input files -

### __Raw Data File__
The raw data file is generated by the software of the instrument. These files may contain measured data, instrument setup and some metadata but all information may not be in this file. The metadata and the instrument's setup information required by the NeXus application definition can be supplied via the ELN file.


### __ELN Schema File__
A yaml schema file (with extension `.scheme.archive.yaml`) that contains schema structure according to the NeXus application defintiion and metadata for NOMAD (for NOMAD internal use). NOMAD reads such schema file and creates an archive file (with extention `archive.json`). Later, NOMAD renders a GUI representing the archive file where user can fill the metadata corresponding the NeXus schema. Later, nomad generates structural a yaml file (another type of eln file with extenstion `.yaml`) collecting the user provided data. The final eln file (with extension `.yaml`) will be read by the reader and data goes to the NeXus file.

In the tabbed window below, an example of ELN schema file for STS experiment is shown. The schema is designed according to the NeXus application definition `NXsts`. The schema file contains all impotant the metadata fields that are not supplied by raw file but required by the `NXsts` application definition. Tab from left to right shows the schema file, the generated archive file and the graphical representation of the archive file in NOMAD and final eln file (with extension `.yaml`).

!!! example

    === "STS Schema for NOMAD (sts.scheme.archive.yaml)"
        <div markdown="1" class=scrollable>
            ```yaml
            definitions:
            name: An ELN example for STS (Scanning Tunneling Spectroscopy).
            sections:
                sts:
                base_sections:
                    - pynxtools.nomad.dataconverter.NexusDataConverter # Converter module
                    - nomad.datamodel.data.EntryData
                m_annotations:
                    template:
                    reader: spm
                    nxdl: NXsts
                    eln:
                    hide: []
                # Schema according to the applicatoin definition NXsts
                quantities:
                    default:
                    type: str
                    m_annotations:
                        eln:
                        component: StringEditQuantity
                    description: |
                        The name of the NXdata group that comes as child of the entry group for default plot visualization
                        to be displayed upon the entry of NeXus file.
                    definition:
                    type:
                        type_kind: Enum
                        type_data:
                        - NXsts
                    m_annotations:
                        eln:
                        component: EnumEditQuantity
                    description: |
                        Name of the definitions from NeXus app def designed for STS experiments, one can use 
                        NXsts or NXspm, but NXsts is recommended.
                    experiment_technique:
                    type:
                        type_kind: Enum
                        type_data:
                        - STS
                    m_annotations:
                        eln:
                        component: EnumEditQuantity
                    description: |
                        Name of the technique used for the experiment, e.g. STS.
                    experiment_description:
                    type: str
                    m_annotations:
                        eln:
                        component: RichTextEditQuantity
                    description: |
                        Descriptive comments for this experiment, added by the experimenter in eln or 
                        coming from the output file, e.g. Comment01 SYNC & Filter LP 8order WITHDRAW
                        600 steps, locked Au(111), 50pA, 100 mV set point, 1mV DCA, 973Hz,138
                        1st H, -84 2nd H.
                    identifier_experiment: 
                    type: str
                    m_annotations:
                        eln:
                        component: StringEditQuantity
                    description: |
                        An unique identifier fot the experiment. e.g. the identifier
                        could be specific for a lab or experiment team.
                    identifier_collection: 
                    type: str
                    m_annotations:
                        eln:
                        component: StringEditQuantity
                    description: |
                        An unique identifier of a collection. Use this
                        if the experiment if part of a collection of experiments
                sub_sections:
                    User:
                    section:
                        m_annotations:
                        eln:
                            overview: true
                        quantities:
                        name:
                            type: str
                            m_annotations:
                            eln:
                                component: StringEditQuantity
                            description: |
                            Name of the user who performed the experiment.
                        affiliation:
                            type: str
                            shape: "*"
                            m_annotations:
                            eln:
                                component: StringEditQuantity
                            description: |
                            Affiliation of the user who performed the experiment.
                        email:
                            type: str
                            shape: "*"
                            m_annotations:
                            eln:
                                component: StringEditQuantity
                            description: |
                            List of emails from users who performed the experiment.
                    Instrument:
                    section:
                        m_annotations:
                        eln:
                            overview: true
                        sub_sections:
                        hardware:
                            section:
                            m_annotations:
                                eln:
                                overview: true
                            quantities:
                                name:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Name of the hardware. (e.g. Nanonis).
                                vendor:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Name of the manufacturer of the hardware (e.g. Nanonis).
                                model:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Version or model of the component named by the manufacturer (e.g. Generic 5e).
                                model/@version:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    If model has a distinquishable version (e.g. BP5e).
                        software:
                            section:
                            m_annotations:
                                eln:
                                overview: true
                            quantities:
                                vendor:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Name of the manufacturer of the software.
                                name:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Name of the software. (e.g. Nanonis).
                                model:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Version or model, required to choose correct file parser, of the component named 
                                    by the manufacturer (e.g. Generic 5e).
                                    Note that model should be exactly the same as the one in the experiment file.
                                model/@version:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    If model has a distinquishable version (e.g. BP5e).
                        lockin_amplifier:
                            section:
                            m_annotations:
                                eln:
                                overview: true
                            quantities:
                                modulation_signal:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Type of the signal either in voltage or current.
                                lockin_current_flip_sign:
                                type: np.float64
                                m_annotations:
                                    eln:
                                    component: NumberEditQuantity
                                description: |
                                    The sign (1 or -1) that defines the sign of the lock-in current.
                                    The calibration procedure with retracted tip is normally performed
                                    to compensate for the signal phase delay in SPM. The procedure 
                                    yields two possible solutions, this number should be equal to 1 or -1
                                    depending on which solution is chosen (this concept mainly used in 
                                    STS experiments, e.g. in Nanonis machine).
                        scan_environment:
                            section:
                            m_annotations:
                                eln:
                                overview: true
                            quantities:
                                tip_temp:
                                type: np.float64
                                unit: kelvin
                                m_annotations:
                                    eln:
                                    component: NumberEditQuantity
                                    defaultDisplayUnit: K
                                description: |
                                    Temperature of STM head. Note: At least one field from tip_temp,
                                    cryo_bottom_temp and cryo_shield_temp must be provided.
                                    At least one field from tip_temp, cryo_bottom_temp and cryo_shield_temp must be provided.
                                cryo_bottom_temp:
                                type: np.float64
                                unit: kelvin
                                m_annotations:
                                    eln:
                                    component: NumberEditQuantity
                                    defaultDisplayUnit: K
                                description: |
                                    Temperature of the cold tail of the cryostat. Note: 
                                    At least one field from tip_temp, cryo_bottom_temp and cryo_shield_temp must be provided.
                                cryo_shield_temp:
                                type: np.float64
                                unit: kelvin
                                m_annotations:
                                    eln:
                                    component: NumberEditQuantity
                                    defaultDisplayUnit: K
                                description: |
                                    Temperature of liquid nitrogen shield. Note: At
                                    least one field from tip_temp, cryo_bottom_temp and cryo_shield_temp.
                    Sample:
                    section:
                        m_annotations:
                        eln: 
                            overview: true
                        quantities:
                        name:
                            type: str
                            m_annotations:
                            eln:
                                component: StringEditQuantity
                            description: |
                            Name of the sample.
                        chemical_formula:
                            type: str
                            m_annotations:
                            eln:
                                component: StringEditQuantity
                            description: |
                            The chemical formula specified using CIF conventions.
                            Abbreviated version of CIF standard:
                            * Only recognized element symbols may be used.
                            * Each element symbol is followed by a 'count' number. A count of '1' may be omitted.
                            * A space or parenthesis must separate each cluster of (element symbol + count).
                            * Where a group of elements is enclosed in parentheses, the multiplier for the
                                group must follow the closing parentheses. That is, all element and group
                                multipliers are assumed to be printed as subscripted numbers.
                            * Unless the elements are ordered in a manner that corresponds to their chemical
                                structure, the order of the elements within any group or moiety depends on
                                whether or not carbon is present.
                            * If carbon is present, the order should be: 
                                - C, then H, then the other elements in alphabetical order of their symbol.
                                - If carbon is not present, the elements are listed purely in alphabetic order of their symbol.
                            * This is the *Hill* system used by Chemical Abstracts.
                        description:
                            type: str
                            m_annotations:
                            eln:
                                component: RichTextEditQuantity
                            description: |
                            Description of the sample or sample preparation.
                        sub_sections:
                        Sample_component:
                            section:
                            m_annotations:
                                eln:
                                overview: true
                            description: |
                                A sample component is a part of the sample that is of interest.
                                For example, a sample component could be a layer of a multilayer sample.
                            quantities:
                                name:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    Name of the sample component.
                                sample_id:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    An unique identifier for the sample component.
                                chemical_formula:
                                type: str
                                m_annotations:
                                    eln:
                                    component: StringEditQuantity
                                description: |
                                    The chemical formula specified using CIF conventions.
                                    Abbreviated version of CIF standard:
                                    * Only recognized element symbols may be used.
                                    * Each element symbol is followed by a 'count' number. A count of '1' may be omitted.
                                    * A space or parenthesis must separate each cluster of (element symbol + count).
                                    * Where a group of elements is enclosed in parentheses, the multiplier for the
                                    group must follow the closing parentheses. That is, all element and group
                                    multipliers are assumed to be printed as subscripted numbers.
                                    * Unless the elements are ordered in a manner that corresponds to their chemical
                                    structure, the order of the elements within any group or moiety depends on
                                    whether or not carbon is present.
                                    * If carbon is present, the order should be:
                                    - C, then H, then the other elements in alphabetical order of their symbol.
                                    - If carbon is not present, the elements are listed purely in alphabetic order of their symbol.
                                    * This is the *Hill* system used by Chemical Abstracts.
                                description:
                                type: str
                                m_annotations:
                                    eln:
                                    component: RichTextEditQuantity
                                description: |
                                    Description of the sample component or sample preparation.
                        History:
                            section:
                            m_annotations:
                                eln:
                                overview: true
                            quantities:
                                notes:
                                type: str
                                m_annotations:
                                    eln:
                                    component: RichTextEditQuantity
                                description: |
                                    Notes about the sample history.
            ```
        </div>

    === "Archive File (sts.archive.json)"

        <div markdown="1" class=scrollable>
            ```json
            {
                "data": {
                    "m_def": "../upload/raw/sts.scheme.archive.yaml#/definitions/section_definitions/0",
                    "reader": "spm",
                    "nxdl": "NXsts",
                    "input_files": ["config.json", "Bias-Spectroscopy00015_20230420.dat"],
                    "export": true,
                    "default": "current_filter_grad",
                    "definition": "NXsts",
                    "experiment_technique": "STS",
                    "experiment_description": "<p>The experiment with</p>\n<p>Bias: -50mA<br />Setpoint: 25pA</p>",
                    "identifier_experiment": "Au_mica_2023_Y_A_diPAMY_154-211C_370C_1min_385C_30min_400C_1min_400C_30min_415_30min_430_30min_11min_30min_30min_20230416_20230420",
                    "identifier_collection": "Au_mica_2023_Y_A_diPAMY_154-211C_370C_1min_385C_30min_400C_1min_400C_30min_415_30min_430_30min_11min_30min_30min_20230419",
                    "User": {
                    "name": "Yichen Jin",
                    "affiliation": [
                        "Rubel Mozumder",
                        "Dr. Cojal Gonzalez",
                        "Dr. Carlos-Andres Palma"
                    ],
                    "email": [
                        "ycjin@physik.hu-berlin.de",
                        "rubel.mozumder@physik.hu-berlin.de",
                        "cojal@physik.hu-berlin.de",
                        "palma@physik.hu-berlin.de"
                    ]
                    },
                    "Instrument": {
                    "hardware": {
                        "name": "Nanonis",
                        "vendor": "Nanonis",
                        "model": "Generic5",
                        "model/@version": "5"
                    },
                    "software": {
                        "vendor": "Nanonis",
                        "name": "Nanonis",
                        "model": "Generic5",
                        "model/@version": "5"
                    },
                    "lockin_amplifier": { "modulation_signal": "Current", "flip_sign": -1 },
                    "Scan_environment": { "head_temperature": 10 }
                    },
                    "Sample": {
                    "name": "diPAMY",
                    "description": "<div>Substrate:</div>\n<div>Two layers stack: Au-Mica</div>",
                    "Sample_component": {
                        "name": "Au(Mica)",
                        "identifier_component": "Au(KAl3Si3O12H2)",
                        "description": "<div>Substrate:</div>\n<div>Two layers stack: Au-Mica</div>"
                    }
                    }
                }
            }
            ```
        </div>
    === "Graphical Representation of archive.json in NOMAD"
        <div class="scrollable-img">
            <img src="../assets/image.png" alt="Example image">
        </div>
    === "Eln yaml file (generated by NOMAD)"
        <div class="scrollable-img">
        ```yaml
        Sample:
        name: diPAMY
        sample_component_set:
            sample_component:
            chemical_formula: Au(KAl3Si3O12H2)
            description: '<p>Substrate:</p>

                <p>Two layers stack: Au-Mica</p>'
            name: Au(Mica)
        default: current_filter_grad
        definition: NXsts
        experiment_description: '<p>The experiment with</p>
        <p>Bias: -50mA</p>
        <p>Setpoint: 25pA</p>'
        experiment_instrument:
        hardware:
            model: Generic5e
            model/@version: 5
            name: Nanonis
            vendor: Nanonis
        lockin_amplifier:
            lockin_current_flip_sign: -1.0
            modulation_signal: Current
        scan_environment:
            tip_temp:
            unit: K
            value: 10.0
        software:
            model: Generic5e
            model/@version: 5
            name: Nanonis
            vendor: Nanonis
        experiment_technique: STS
        identifier_collection: Au_mica_2023_Y_A_diPAMY_154-211C_370C_1min_385C_30min_400C_1min_400C_30min_415_30min_430_30min_11min_30min_30min_20230419_
        identifier_experiment: Au_mica_2023_Y_A_diPAMY_154-211C_370C_1min_385C_30min_400C_1min_400C_30min_415_30min_430_30min_11min_30min_30min_20230416_20230420
        user:
        affiliation:
            - Rubel Mozumder
            - Dr. Cojal González, José David
            - Dr. Carlos-Andres Palma
        email:
            - ycjin@physik.hu-berlin.de
            - rubel.mozumder@physik.hu-berlin.de
            - cojal@physik.hu-berlin.de
            - palma@physik.hu-berlin.de
            name: Yichen Jin
        ```
        </div>


### __ELN yaml file__
 A eln yaml file is similar to the yaml generated by NOMAD from the ELN schema file. The also contains the same structre of the application definition but in much more simpler than the __ELN Schema File__. Such file can be writen by user follwing the application defintion `NXsts` without help of NOMAD.

=== "Eln yaml file (user provided)"
    <div class="scrollable-img">
    ```yaml
    Sample:
    name: diPAMY
    sample_component_set:
        sample_component:
        chemical_formula: Au(KAl3Si3O12H2)
        description: 'Substrate:

            Two layers stack: Au-Mica'
        name: Au(Mica)
    default: current_filter_grad
    definition: NXsts
    experiment_description: |
        'The experiment with
        Bias: -50mA
        Setpoint: 25pA'
    experiment_instrument:
    hardware:
        model: Generic5e
        model/@version: 5
        name: Nanonis
        vendor: Nanonis
    lockin_amplifier:
        lockin_current_flip_sign: -1.0
        modulation_signal: Current
    scan_environment:
        tip_temp:
        unit: K
        value: 10.0
    software:
        model: Generic5e
        model/@version: 5
        name: Nanonis
        vendor: Nanonis
    experiment_technique: STS
    identifier_collection: Au_mica_2023_Y_A_diPAMY_154-211C_370C_1min_385C_30min_400C_1min_400C_30min_415_30min_430_30min_11min_30min_30min_20230419_
    identifier_experiment: Au_mica_2023_Y_A_diPAMY_154-211C_370C_1min_385C_30min_400C_1min_400C_30min_415_30min_430_30min_11min_30min_30min_20230416_20230420
    user:
    affiliation:
        - Rubel Mozumder
        - Dr. Cojal González, José David
        - Dr. Carlos-Andres Palma
    email:
        - ycjin@physik.hu-berlin.de
        - rubel.mozumder@physik.hu-berlin.de
        - cojal@physik.hu-berlin.de
        - palma@physik.hu-berlin.de
    name: Yichen Jin
    ```
    </div>

### __Config file__
A config file that carries mapping information from the raw data to the NeXus Application Definition concepts. The config file follows certain rules how the raw data will be processed and orgaised in the NeXus file.

=== "Graphical Representation of archive.json in NOMAD"
    <div class="scrollable-img">
    ```json
    {
        "ENTRY[entry]": {
            "@default": { "raw_path": "@default:current_grad" },
            "definition": { "@version": "" },
            "start_time": {
            "raw_path": "/Start time/value"
            },
            "end_time": {
            "raw_path": "/Saved Date/value"
            },
            "INSTRUMENT[instrument]": {
            "lockin_amplifier": {
                "modulation_status": {
                "raw_path": "/Lock-in/Lock-in status/value"
                },
                "reference_frequency": {
                "raw_path": "/Lock-in/Frequency/value",
                "@units": "/Lock-in/Frequency/unit"
                },
                "modulation_signal": {
                "raw_path": "@default:Voltage"
                },
                "demodulated_signal": {
                "raw_path": "@default:Current"
                },
                "reference_amplitude": {
                "raw_path": "/Lock-in/Amplitude/value",
                "@units": "/Lock-in/Modulated signal/Bias/unit"
                },
                "low_pass_N": [
                {
                    "d1": {
                    "raw_path": "/Lock-in/LP Filter Cutoff D1/value",
                    "@units": "/Lock-in/LP Filter Cutoff D1/unit"
                    }
                },
                {
                    "d2": {
                    "raw_path": "/Lock-in/LP Filter Cutoff D2/value",
                    "@units": "/Lock-in/LP Filter Cutoff D2/unit"
                    }
                }
                ],
                "lp_filter_order_N": [
                {
                    "d1": { "raw_path": "/Lock-in/LP Filter Order D1/value" },
                    "d2": { "raw_path": "/Lock-in/LP Filter Order D2/value" }
                }
                ],
                "hi_pass_N": [
                {
                    "d1": {
                    "raw_path": "/Lock-in/HP Filter Cutoff D1/value",
                    "@units": "/Lock-in/HP Filter Cutoff D1/unit"
                    }
                },
                {
                    "d2": {
                    "raw_path": "/Lock-in/HP Filter Cutoff D2/value",
                    "@units": "/Lock-in/HP Filter Cutoff D2/unit"
                    }
                }
                ],
                "hp_filter_order_N": [
                { "d1": { "raw_path": "/Lock-in/HP Filter Order D1/value" } },
                { "d2": { "raw_path": "/Lock-in/HP Filter Order D2/value" } }
                ],
                "ref_phase_N[ref_phase_n]": [
                {
                    "d1": {
                    "raw_path": "/Lock-in/Reference phase D1/value",
                    "@units": "/Lock-in/Reference phase D1/unit"
                    }
                },
                {
                    "d2": {
                    "raw_path": "/Lock-in/Reference phase D2/value",
                    "@units": "/Lock-in/Reference phase D2/unit"
                    }
                }
                ],
                "harmonic_order_N[harmonic_order_n]": [
                { "d1": { "raw_path": "/Lock-in/Harmonic D1/value" } },
                { "d2": { "raw_path": "/Lock-in/Harmonic D2/value" } }
                ]
            },
            "real_time_controller": {
                "rcs_fabrication": {
                "model": {
                    "raw_path": "/NanonisMain/RT Release/value"
                }
                },
                "rcs_frequency": {
                "raw_path": "/NanonisMain/RT Frequency/value",
                "@units": "/NanonisMain/RT Frequency/unit"
                },

                "rcs_acquisition_time": {
                "raw_path": "/NanonisMain/Acquisition Period/value",
                "@units": "/NanonisMain/Acquisition Period/unit"
                },
                "rcs_animation_time": {
                "raw_path": "/NanonisMain/Animations Period/value",
                "@units": "/NanonisMain/Animations Period/unit"
                },
                "rcs_measurement_time": {
                "raw_path": "/NanonisMain/Measurements Period/value",
                "@units": "/NanonisMain/Measurements Period/unit"
                },
                "rcs_indication_time": {
                "raw_path": "/NanonisMain/Indicators Period/value",
                "@units": "/NanonisMain/Indicators Period/unit"
                }
            },
            "bias_spectroscopy_environment": {
                "BIAS_SPECTROSCOPY[bias_spectroscopy]": {
                "measurement_type": "",
                "POSITIONER_SPM[positioner_spm]": {
                    "controller_label": {
                    "raw_path": "/Z-Controller/Controller name/value"
                    },
                    "z_offset": {
                    "raw_path": "/Bias Spectroscopy/Z offset/value",
                    "@units": "/Bias Spectroscopy/Z offset/unit"
                    },
                    "z_controller": {
                    "controller_status": {
                        "raw_path": "/Z-Controller/Controller status/value"
                    },
                    "set_point": {
                        "raw_path": "/Z-Controller/Setpoint/value",
                        "@units": "/Z-Controller/Setpoint unit/value"
                    },
                    "tip_lift": {
                        "raw_path": "/Z-Controller/TipLift/value",
                        "@units": "/Z-Controller/TipLift/unit"
                    },
                    "z": {
                        "raw_path": "/Z-Controller/Z/value",
                        "@units": "/Z-Controller/Z/unit"
                    },
                    "K_i": {
                        "raw_path": "/Z-Controller/I gain/value"
                    },
                    "K_p": {
                        "raw_path": "/Z-Controller/P gain/value"
                    },
                    "D_t": {
                        "raw_path": "/Z-Controller/Time const/value",
                        "@units": "/Z-Controller/Time const/unit"
                    }
                    }
                },
                "bias_sweep": {
                    "scan_type": "",
                    "settling_time": {
                    "raw_path": "/Bias Spectroscopy/Settling time/value",
                    "@units": "/Bias Spectroscopy/Settling time/unit"
                    },
                    "first_settling_time": {
                    "raw_path": "/Bias Spectroscopy/1st Settling time/value",
                    "@units": "/Bias Spectroscopy/1st Settling time/unit"
                    },
                    "end_settling_time": {
                    "raw_path": "/Bias Spectroscopy/End Settling time/value",
                    "@units": "/Bias Spectroscopy/End Settling time/unit"
                    },
                    "max_slew_rate": {
                    "raw_path": "/Bias Spectroscopy/Max Slew rate/value",
                    "@units": "/Bias Spectroscopy/Max Slew rate/unit"
                    },
                    "final_z": "",
                    "total_spectroscopy_time": "",
                    "sweep_number": {
                    "raw_path": "/Bias Spectroscopy/Number of sweeps/value"
                    },
                    "scan_region": {
                    "scan_range_bias": "",
                    "scan_offset_bias": {
                        "raw_path": ["/Bias/Offset/value"],
                        "@units": "/Bias/Offset/unit"
                    },
                    "scan_angle_N[scan_angle_n]": "",
                    "scan_start_bias": {
                        "raw_path": "/Bias Spectroscopy/Sweep Start/value",
                        "@units": "/Bias Spectroscopy/Sweep Start/unit"
                    },
                    "scan_end_bias": {
                        "raw_path": "/Bias Spectroscopy/Sweep End/value",
                        "@units": "/Bias Spectroscopy/Sweep End/unit"
                    }
                    },
                    "linear_sweep": {
                    "scan_speed": "",
                    "scan_time": "",
                    "forward_speed": {
                        "raw_path": "/Scan/speed forw./value",
                        "@units": "/Scan/speed forw./unit"
                    },
                    "backward_speed": {
                        "raw_path": "/Scan/speed backw./value",
                        "@units": "/Scan/speed backw./unit"
                    },
                    "scan_points_bias": {
                        "raw_path": "/Bias Spectroscopy/Num Pixel/value"
                    },
                    "step_size_bias": "",
                    "reset_bias": "",
                    "backward_sweep": "",
                    "SCAN_DATA[scan_data]": [
                        {
                        "data": {
                            "name": "Lockin Demod 1X",
                            "raw_path": "/dat_mat_components/LI Demod 1 X/value",
                            "@units": "/dat_mat_components/LI Demod 1 X/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Signal 1X" },
                        "grp_name": "Lockin Demod 1X"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 1Y",
                            "raw_path": "/dat_mat_components/LI Demod 1 Y/value",
                            "@units": "/dat_mat_components/LI Demod 1 Y/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Signal 1Y" },
                        "grp_name": "Lockin Demod 1Y"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 2X",
                            "raw_path": "/dat_mat_components/LI Demod 2 X/value",
                            "@units": "/dat_mat_components/LI Demod 2 X/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Signal 2X" },
                        "grp_name": "Lockin Demod 2X"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 2Y",
                            "raw_path": "/dat_mat_components/LI Demod 2 Y/value",
                            "@units": "/dat_mat_components/LI Demod 2 Y/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Signal 2Y" },
                        "grp_name": "Lockin Demod 2Y"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 1X_filter",
                            "raw_path": "/dat_mat_components/LI Demod 1 X [filt]/value",
                            "@units": "/dat_mat_components/LI Demod 1 X [filt]/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias [filt]/value",
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Demod 1X(filter)" },
                        "grp_name": "Lockin_Demod_1X_filter"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 1Y_filter",
                            "raw_path": "/dat_mat_components/LI Demod 1 Y [filt]/value",
                            "@units": "/dat_mat_components/LI Demod 1 Y [filt]/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias [filt]/value",
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Demod 1Y(filter)" },
                        "grp_name": "Lockin_Demod_1Y_filter"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 2X_filter",
                            "raw_path": "/dat_mat_components/LI Demod 2 X [filt]/value",
                            "@units": "/dat_mat_components/LI Demod 2 X [filt]/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias [filt]/value",
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Demod 2X(filter)" },
                        "grp_name": "Lockin_Demod_2X_filter"
                        },
                        {
                        "data": {
                            "name": "Lockin Demod 2Y_filter",
                            "raw_path": "/dat_mat_components/LI Demod 2 Y [filt]/value",
                            "@units": "/dat_mat_components/LI Demod 2 Y [filt]/unit"
                        },
                        "0": {
                            "name": "Bias Voltage",
                            "raw_path": [
                            "/dat_mat_components/Bias [filt]/value",
                            "/dat_mat_components/Bias calc/value",
                            "/dat_mat_components/Bias/value"
                            ],
                            "@units": [
                            "/dat_mat_components/Bias calc/unit",
                            "/dat_mat_components/Bias/unit"
                            ]
                        },
                        "title": { "raw_path": "@default:Lockin Demod 2Y(filter)" },
                        "grp_name": "Lockin_Demod_2Y_filter"
                        }
                    ]
                    }
                },
                "CIRCUIT[circuit]": ""
                },
                "independent_controllers": "",
                "measurement_sensors": ""
            },
            "current_sensor": {
                "AMPLIFIER[amplifier]": {
                "current_gain": { "raw_path": "/Current/Gain/value" }
                },
                "current": {
                "raw_path": "/Current/Current/value",
                "@units": "/Current/Current/unit"
                },
                "current_calibration": {
                "calibration_interval": "",
                "coefficients": {
                    "raw_path": "/Current/Calibration/value",
                    "@units": "/Current/Calibration/unit"
                }
                },
                "current_offset": {
                "raw_path": "/Current/Offset/value",
                "@units": "/Current/Offset/unit"
                }
            },
            "piezo_sensor": {
                "piezo_configuration": {
                "calibration": {
                    "calibration_type": {
                    "raw_path": "@default:active"
                    },
                    "calibration_coefficient_N[calibration_coefficient_n]": [
                    {
                        "x": {
                        "raw_path": "/Piezo Configuration/Calib. X/value",
                        "@units": "/Piezo Configuration/Calib. X/unit"
                        }
                    },
                    {
                        "y": {
                        "raw_path": "/Piezo Configuration/Calib. Y/value",
                        "@units": "/Piezo Configuration/Calib. Y/unit"
                        }
                    },
                    {
                        "z": {
                        "raw_path": "/Piezo Configuration/Calib. Z/value",
                        "@units": "/Piezo Configuration/Calib. Z/unit"
                        }
                    }
                    ],
                    "second_order_correction_N[second_order_correction_n]": [
                    {
                        "x": {
                        "raw_path": "/Piezo Configuration/2nd order corr X/value",
                        "@units": "/Piezo Configuration/2nd order corr X/unit"
                        }
                    },
                    {
                        "y": {
                        "raw_path": "/Piezo Configuration/2nd order corr Y/value",
                        "@units": "/Piezo Configuration/2nd order corr Y/unit"
                        }
                    }
                    ],
                    "drift_N[drift_n]": [
                    {
                        "x": {
                        "raw_path": "/Piezo Configuration/Drift X/value",
                        "unit": "/Piezo Configuration/Drift X/unit"
                        }
                    },
                    {
                        "y": {
                        "raw_path": "/Piezo Configuration/Drift Y/value",
                        "unit": "/Piezo Configuration/Drift Y/unit"
                        }
                    },
                    {
                        "z": {
                        "raw_path": "/Piezo Configuration/Drift Z/value",
                        "unit": "/Piezo Configuration/Drift Z/unit"
                        }
                    }
                    ],
                    "hv_gain_N[hv_gain_n]": [
                    { "x": { "raw_path": "/Piezo Configuration/HV Gain X/value" } },
                    { "y": { "raw_path": "/Piezo Configuration/HV Gain Y/value" } },
                    { "z": { "raw_path": "/Piezo Configuration/HV Gain Z/value" } }
                    ],
                    "tilt_N[tilt_n]": [
                    {
                        "x": {
                        "raw_path": "/Piezo Configuration/Tilt X/value",
                        "@units": "/Piezo Configuration/Tilt X/unit"
                        }
                    },
                    {
                        "y": {
                        "raw_path": "/Piezo Configuration/Tilt Y/value",
                        "@units": "/Piezo Configuration/Tilt Y/unit"
                        }
                    },
                    {
                        "z": {
                        "raw_path": "/Piezo Configuration/Tilt Z/value",
                        "@units": "/Piezo Configuration/Tilt Z/unit"
                        }
                    }
                    ],
                    "drift_correction_status": {
                    "raw_path": [
                        "/Piezo Configuration/Drift correction status/value",
                        "/Piezo Calibration/Drift correction status/value"
                    ]
                    }
                },
                "piezo_material": {
                    "curvature_radius_N": [
                    {
                        "x": {
                        "raw_path": "/Piezo Configuration/Curvature radius X/value",
                        "@units": "/Piezo Configuration/Curvature radius X/unit"
                        }
                    },
                    {
                        "y": {
                        "raw_path": "/Piezo Configuration/Curvature radius Y/value",
                        "@units": "/Piezo Configuration/Curvature radius Y/unit"
                        }
                    },
                    {
                        "z": {
                        "raw_path": "/Piezo Configuration/Curvature radius Z/value",
                        "@units": "/Piezo Configuration/Curvature radius Z/unit"
                        }
                    }
                    ]
                }
                },
                "POSITIONER_SPM[positioner_spm]": "",
                "x": { "raw_path": "/X/value", "@units": "/X/unit" },
                "y": { "raw_path": "/Y/value", "@units": "/Y/unit" },
                "z": { "raw_path": "/Z/value", "@units": "/Z/unit" }
            },
            "sample_bias_voltage": {
                "bias_voltage": {
                "raw_path": "/Bias/Bias/value",
                "@units": "/Bias/Bias/unit"
                },
                "bias_calibration": {
                "coefficients": {
                    "raw_path": "/Bias/Calibration/value",
                    "@units": "/Bias/Calibration/unit"
                }
                }
            },
            "scan_environment": {
                "scan_name": {
                "raw_path": "/Scan/series name/value"
                },
                "SCAN_CONTROL[bias_spec_scan_control]": {
                "scan_name": {
                    "raw_path": "/Scan/series name/value"
                },
                "scan_region": {
                    "scan_angle_N[scan_angle_n]": "",
                    "scan_offset_N[scan_offset_n]": "",
                    "scan_range_N[scan_range_n]": ""
                },
                "mesh_SCAN[mesh_scan]": {
                    "forward_speed_N[forward_speed_n]": "",
                    "backward_speed_N[backward_speed_n]": "",
                    "scan_speed": { "@units": "" },
                    "scan_time": { "@units": "" },
                    "SCAN_DATA[scan_data]": ""
                },
                "scan_type": ""
                },
                "cryo_bottom_temp": { "@units": "" },
                "cryo_shield_temp": { "@units": "" },
                "tip_temp": {
                "raw_path": "/Temperature 1/Temperature 1/value",
                "@units": "/Temperature 1/Temperature 1/unit"
                },
                "cryo_shield_temp_sensor": "",
                "cryo_temp_sensor": "",
                "tip_temp_sensor": ""
            },
            "TEMPERATURE[cryo_shield_temp_sensor]": {
                "CHANNEL_temp[channel_temp]": "",
                "temperature_calibration": { "coefficients": "" },
                "TEMPERATURE_DATA[temperature_data]": ""
            },
            "TEMPERATURE[cryo_temp_sensor]": {
                "CHANNEL_temp[channel_temp]": "",
                "temperature_calibration": { "coefficients": "" },
                "TEMPERATURE_DATA[temperature_data]": ""
            },
            "TEMPERATURE[tip_temp_sensor]": {
                "CHANNEL_temp[channel_temp]": "",
                "temperature_calibration": { "coefficients": "" },
                "TEMPERATURE_DATA[temperature_data]": [
                {
                    "data": {
                    "name": "temperature1",
                    "raw_path": "/dat_mat_components/Temperature 1/value",
                    "@units": "/dat_mat_components/Temperature 1/unit"
                    },
                    "0": {
                    "name": "Bias Voltage",
                    "raw_path": [
                        "/dat_mat_components/Bias calc/value",
                        "/dat_mat_components/Bias/value"
                    ],
                    "@units": [
                        "/dat_mat_components/Bias calc/unit",
                        "/dat_mat_components/Bias/unit"
                    ],
                    "axis_ind": 0
                    },
                    "title": { "raw_path": "@default:Bias Spectroscopy Temperature1" },
                    "grp_name": "temperature1"
                },
                {
                    "data": {
                    "name": "temperature1_filter",
                    "raw_path": "/dat_mat_components/Temperature 1 [filt]/value",
                    "@units": "/dat_mat_components/Temperature 1 [filt]/unit"
                    },
                    "0": {
                    "name": "Bias Voltage",
                    "raw_path": [
                        "/dat_mat_components/Bias calc/value",
                        "/dat_mat_components/Bias/value"
                    ],
                    "@units": [
                        "/dat_mat_components/Bias calc/unit",
                        "/dat_mat_components/Bias/unit"
                    ],
                    "axis_ind": 0
                    },
                    "title": {
                    "raw_path": "@default:Bias Spectroscopy Temperature1(filter)"
                    },
                    "grp_name": "temperature1_filter"
                }
                ]
            }
            },
            "DATA[data]": [
            {
                "data": {
                "name": "Current",
                "raw_path": "/dat_mat_components/Current/value",
                "@units": "/dat_mat_components/Current/unit"
                },
                "0": {
                "name": "Bias Voltage",
                "raw_path": [
                    "/dat_mat_components/Bias calc/value",
                    "/dat_mat_components/Bias/value"
                ],
                "@units": [
                    "/dat_mat_components/Bias calc/unit",
                    "/dat_mat_components/Bias/unit"
                ]
                },
                "title": { "raw_path": "@default:Bias Spectroscopy" },
                "grp_name": "current"
            },
            {
                "data": {
                "name": "Current_filter",
                "raw_path": "/dat_mat_components/Current [filt]/value",
                "@units": "/dat_mat_components/Current [filt]/unit"
                },
                "0": {
                "name": "Bias Voltage",
                "raw_path": [
                    "/dat_mat_components/Bias [filt]/value",
                    "/dat_mat_components/Bias calc/value",
                    "/dat_mat_components/Bias/value"
                ],
                "@units": [
                    "/dat_mat_components/Bias calc/unit",
                    "/dat_mat_components/Bias/unit"
                ]
                },
                "title": { "raw_path": "@default:Bias Spectroscopy(filter)" },
                "grp_name": "Current_filter"
            },
            {
                "data": {
                "name": "Current_filter",
                "raw_path": "/dat_mat_components/Current [filt]/value",
                "@units": "/dat_mat_components/Current [filt]/unit"
                },
                "0": {
                "name": "Bias Voltage",
                "raw_path": [
                    "/dat_mat_components/Bias [filt]/value",
                    "/dat_mat_components/Bias calc/value",
                    "/dat_mat_components/Bias/value"
                ],
                "@units": [
                    "/dat_mat_components/Bias calc/unit",
                    "/dat_mat_components/Bias/unit"
                ]
                },
                "title": { "raw_path": "@default:Bias Spectroscopy(filter)" },
                "grp_name": "Current_filter"
            },
            {
                "data": {
                "name": "Current_backward",
                "raw_path": "/dat_mat_components/Current [bwd]/value",
                "@units": "/dat_mat_components/Current [bwd]/unit"
                },
                "0": {
                "name": "Bias Voltage",
                "raw_path": [
                    "/dat_mat_components/Bias [filt]/value",
                    "/dat_mat_components/Bias calc/value",
                    "/dat_mat_components/Bias/value"
                ],
                "@units": [
                    "/dat_mat_components/Bias calc/unit",
                    "/dat_mat_components/Bias/unit"
                ]
                },
                "title": { "raw_path": "@default:Bias Spectroscopy(Backward)" },
                "grp_name": "Current_Backward"
            }
            ],
            "reproducibility_indicators": {
            "bias_sweep": "",
            "current": "",
            "current_gain": "",
            "current_offset": "",
            "reference_frequency": "",
            "modulation_signal": ""
            },
            "resolution_indicators": {
            "bias_sweep": "",
            "cryo_bottom_temp": "",
            "cryo_shield_temp": "",
            "reference_frequency": "",
            "modulation_signal": "",
            "stm_head_temp": ""
            }
        }
    }
    ```

    </div>
